<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		   <link rel="stylesheet" href="{{ url_for('static', filename='css/one.css') }}">
		   <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/box2-rubbish.css') }}" />
		   <script src="{{ url_for('static', filename='js/box2-rubbish.js') }}"></script>
		   <title>è‡ªç„¶</title>
	</head>
	<body>
		<div class="main">
		<!-- å¯¼èˆªæ  -->
			<header>
				<!-- <div class="logo">
					<img src="../image/Logo.png" alt="Logo"/>
				</div> -->
				<img src="../static/image/Logo4.svg" alt="Logo" style="width: 600px; height: 500px;"/>
				<nav>
					<ul>
						<li><a href="#">HOME</a></li> <!-- å®¶ -->
						<li><a href="#">ABOUT</a></li> <!-- å…³äº -->
						<li><a href="#">SERVICE</a></li> <!-- æœåŠ¡ -->
						<li><a href="#">PROJECTS</a></li> <!-- é¡¹ç›® -->
						<li><a href="#">STORIES</a></li> <!-- æ•…äº‹ -->
						<li><a href="#">KNOWLEDGE</a></li> <!-- çŸ¥è¯† -->
						<li><a href="#">CONTACT</a></li> <!-- è”ç³» -->
					</ul>
				</nav>
			</header>
		<!-- å¯¼èˆªæ  -->
		<!-- ä¸­é—´éƒ¨åˆ† -->
			<div class="hero">
				<div class="box">
					<h3>Discover The Colorful World</h3> <!-- æ¢ç´¢å¤šå½©çš„ä¸–ç•Œ -->
					<h1>New Adventure</h1> <!-- æ–°å†’é™© -->
					<p>Introduce the content of garbage sorting</p> <!-- ä»‹ç»åƒåœ¾åˆ†ç±»çš„å†…å®¹ -->
					<button>Discover Now</button> <!-- ç«‹å³å‘ç° -->
				</div>
			</div>
		<!-- ä¸­é—´éƒ¨åˆ† -->
		</div>
		
		<!-- ä¸‹æ–‡ä¸€ -->
		<section class="box1">
			<div class="box1-container">
				<div class="box1-content">
					<div class="box1-text">
						<hgroup class="">
						    <h2 class="">ABOUT</h2>
						</hgroup>
						<p class="box1-text-1">ã‚¦ãƒŸã¨ãƒ’ãƒˆã‚’ã€ãƒã‚¸ãƒ†ã‚£ãƒ–ã«ã¤ãªãç›´ã™</p>
						<p class="box1-text-2">UMITO Partnersã¯ã€æµ·ã¨äººã‚’æŒç¶šå¯èƒ½ãªé–¢ä¿‚ã¸ã¨ã¤ãªãç›´ã—ã€<br class="box1-text-2-1">æµ·ã‚’ãƒã‚¤ãƒãƒ£ãƒ¼ãƒã‚¸ãƒ†ã‚£ãƒ–ã¸ã¨ã‚·ãƒ•ãƒˆã™ã‚‹<br class="box1-text-2-2">æµ·æ´‹ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£ãƒ»ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°ä¼šç¤¾ã§ã™ã€‚</p>
						<div class="box1-text-3">
							<a href="#" class="box1-text-3-1"><p class="">MORE</p></a>
						</div>
					</div>
				</div>
				<div class="box1-img"><img src="../static/image/8.jpg"/></div>
			</div>
		</section>
		<!-- ä¸‹æ–‡ä¸€ -->
		
		<!-- ä¸‹æ–‡ä¸‰-->
		<div class="box3-under">
                <div class="ai-interaction-box">
                    <div id="chat-box" class="chat-display">
                        <div class="ai-message">
                            ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„åƒåœ¾åˆ†ç±»åŠ©æ‰‹ã€‚è¯·é—®éœ€è¦åˆ†ç±»ä»€ä¹ˆç‰©å“ï¼Ÿ
                        </div>
                    </div>

                    <div class="input-area">
                        <input type="file" id="file-input" accept="image/*" style="display: none;">
                        <label for="file-input" class="upload-button">
                            ğŸ“¸ ä¸Šä¼ å›¾ç‰‡
                        </label>

                        <input type="text" id="user-input" placeholder="è¾“å…¥ç‰©å“åç§°å’ŒåŸå¸‚ï¼ˆä¾‹å¦‚ï¼šä¸Šæµ·çš„åºŸæ—§æ‰‹æœºå£³æ€ä¹ˆæ‰”ï¼Ÿï¼‰">

                        <button id="send-btn" onclick="sendMessage()">å‘é€</button>
                    </div>
                </div>
             </div>
		<!-- ä¸‹æ–‡ä¸‰-->
		
		<!-- ä¸‹æ–‡äºŒ -->
		<div class="box2">
			<div class="box2-container">
				<div class="box2-on">
					<div class="box2-on-title">
						<h1>åƒåœ¾åˆ†ç±»çš„ç±»å‹</h1>
					</div>
				</div>
				<div class="box2-under">
					<div class="box2-Recyclable">
						<div class="box2-rubbish">
							<figure class="snip1477">
							  <img src="../static/image/10.jpg" alt="sample38" />
							  <div class="title">
							    <div>
							      <h2>rubbish</h2>
							      <h4>Recyclable</h4>
							    </div>
							  </div>
							  <figcaption>
							    <p>æ­£ç¡®åˆ†ç±»å¯å›æ”¶ç‰©ï¼Œå…±åˆ›ç»¿è‰²å®¶å›­ã€‚</p>
							  </figcaption>
							  <a href="#"></a>
							</figure>
						</div>
					</div>
					<div class="box2-Non-recylable">
						<div class="box2-rubbish">
							<figure class="snip1477">
							  <img src="../static/image/11.jpg" alt="sample38" />
							  <div class="title">
							    <div>
							      <h2>rubbish</h2>
							      <h4>Non recylable</h4>
							    </div>
							  </div>
							  <figcaption>
							    <p>æ±¡æŸ“ç¯å¢ƒï¼Œéœ€ä¸“é—¨å¤„ç†ï¼Œéš”ç»å±å®³ã€‚</p>
							  </figcaption>
							  <a href="#"></a>
							</figure>
						</div>
					</div>
					<div class="box2-Kitchen">
						<div class="box2-rubbish">
							<figure class="snip1477">
							  <img src="../static/image/12.jpg" alt="sample38" />
							  <div class="title">
							    <div>
							      <h2>rubbish</h2>
							      <h4>Kitchen</h4>
							    </div>
							  </div>
							  <figcaption>
							    <p>å¨ä½™åƒåœ¾åˆ†å¼€æŠ•ï¼Œå¾ªç¯åˆ©ç”¨ç›Šåƒç§‹ã€‚</p>
							  </figcaption>
							  <a href="#"></a>
							</figure>
						</div>
					</div>
					<div class="box2-Hazardous">
						<div class="box2-rubbish">
							<figure class="snip1477">
							  <img src="../static/image/13.jpg" alt="sample38" />
							  <div class="title">
							    <div>
							      <h2>rubbish</h2>
							      <h4>Hazardous</h4>
							    </div>
							  </div>
							  <figcaption>
							    <p>å†…å«æ¯’ç´ ï¼Œå¦¥å–„å¤„ç†ï¼Œé¿å…è´»å®³ã€‚</p>
							  </figcaption>
							  <a href="#"></a>
							</figure>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- ä¸‹æ–‡äºŒ -->

          </div>
       </div>
	</body>
	<script>
        // å®šä¹‰ sendMessage å‡½æ•°ï¼Œåœ¨ç‚¹å‡»å‘é€æŒ‰é’®æ—¶è§¦å‘
        async function sendMessage() {
            // 1. è·å– ID å¯¹åº”çš„å…ƒç´ 
            const inputField = document.getElementById("user-input");
            const fileInput = document.getElementById("file-input");
            const chatBox = document.getElementById("chat-box");

            const text = inputField.value;
            const file = fileInput.files[0];

            if (!text && !file) return;

            // 2. åœ¨èŠå¤©çª—å£æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯
            const userMsgHtml = `<div class="user-message">ğŸ‘¤ ä½ : ${text}</div>`;
            chatBox.innerHTML += userMsgHtml;
            chatBox.scrollTop = chatBox.scrollHeight; // æ»šåŠ¨åˆ°åº•éƒ¨

            // 3. æ˜¾ç¤º AI æ­£åœ¨å¤„ç†çš„æç¤º
            const loadingMsgHtml = `<div class="ai-message" id="loading-msg">ğŸ¤– æ­£åœ¨è°ƒç”¨ Agent æ€è€ƒå¹¶æŸ¥è¯¢è§„åˆ™...</div>`;
            chatBox.innerHTML += loadingMsgHtml;
            chatBox.scrollTop = chatBox.scrollHeight;

            // 4. å‡†å¤‡å‘é€ç»™ Python çš„æ•°æ®
            const formData = new FormData();
            formData.append("message", text);
            if (file) {
                formData.append("image", file);
            }

            // æ¸…ç©ºè¾“å…¥æ¡†å’Œæ–‡ä»¶é€‰æ‹©
            inputField.value = '';
            fileInput.value = '';

            try {
                // 5. å‘é€è¯·æ±‚ç»™ Flask åç«¯ /chat æ¥å£
                const response = await fetch("/chat", {
                    method: "POST",
                    body: formData
                });

                const data = await response.json();

                // 6. ç§»é™¤åŠ è½½æç¤ºï¼Œæ˜¾ç¤º AI çš„å›å¤
                const loadingElement = document.getElementById("loading-msg");
                if (loadingElement) {
                    loadingElement.remove();
                }

                if (data.status === "success") {
                    const aiReplyHtml = `<div class="ai-message">ğŸ’¡ AI åŠ©æ‰‹: ${data.reply}</div>`;
                    chatBox.innerHTML += aiReplyHtml;
                } else {
                    const errorMsgHtml = `<div class="ai-message error">âŒ æŠ±æ­‰ï¼Œå¤„ç†æ—¶å‡ºé”™äº†: ${data.reply}</div>`;
                    chatBox.innerHTML += errorMsgHtml;
                }

                chatBox.scrollTop = chatBox.scrollHeight; // æ»šåŠ¨åˆ°åº•éƒ¨

            } catch (error) {
                console.error("Fetch Error:", error);
                const loadingElement = document.getElementById("loading-msg");
                if (loadingElement) {
                    loadingElement.remove();
                }
                chatBox.innerHTML += `<div class="ai-message error">âŒ ç½‘ç»œæˆ–æœåŠ¡å™¨è¿æ¥å¤±è´¥ã€‚</div>`;
                chatBox.scrollTop = chatBox.scrollHeight;
            }
        }

        // ç»‘å®šäº‹ä»¶åˆ°å‘é€æŒ‰é’®
        document.getElementById("send-btn").addEventListener("click", sendMessage);

        // ä¹Ÿå¯ä»¥ç»‘å®šå›è½¦äº‹ä»¶
        document.getElementById("user-input").addEventListener("keypress", function(e) {
            if (e.key === 'Enter') {
                sendMessage();
                e.preventDefault(); // é˜»æ­¢é»˜è®¤çš„æ¢è¡Œè¡Œä¸º
            }
        });

    </script>
</html>